<div class="table-responsive">
   {% if bills %}
    <table class="table table-striped table-bordered">
        <thead>
            <tr >
                <th>Bill Number</th>
                <th>Bill Date</th>
                <th>Due date</th>
                <th>Bill Amount</th>
                <th>Transactions 
             
                
                </th>
            </tr>
        </thead>
        <tbody>
            {% for bill in bills %}

            <tr>
                <td>{{ bill.bill_number }}</td>
                <td>{{ bill.bill_date | format_datetime('%d-%m-%Y') }}</td>
                <td>{{ bill.due_date | format_datetime('%d-%m-%Y') }}</td>
                <td>{{ bill.amount }}</td>
          
                <td><a href="bill/{{bill.bill_number}}" class="btn btn-outline-primary btn-sm" role="button" aria-disabled="true">
                    <i class="bi bi-list"></i>
                </a>
                <button  
                 onclick="deleteBill('{{ bill.id }}', '{{ bill.bill_number }}')"
                class="btn btn-outline-primary btn-sm" role="button" aria-disabled="true">
                <i class="bi bi-trash"></i>
            </button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <script>
        function deleteBill(billId,billNumber) {
          
            if (confirm('Are you sure you want to delete bill ' + billNumber + '?')) {
                // Perform deletion logic here, e.g., send a request to the server
                console.log('Bill ' + billNumber + ' deleted.');

                const actionUrl = '/bill/' +billId;

                fetch(actionUrl, {
                    method: "DELETE",
                    headers: {
                        'Content-Type': 'application/json', // Or 'application/x-www-form-urlencoded'
                        // Add any necessary headers, e.g., X-CSRF-TOKEN
                    },
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log('Success:', data);
                        alert("Transaction deleted successfully.");
                        window.location.reload();
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                        // Handle errors
                    });
            }
        
        }
    </script>
    {% else %}
    <p>No bills available.</p>
 
     {% endif %}
</div>